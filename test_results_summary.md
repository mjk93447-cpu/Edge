# Auto Optimization 성능 개선 결과 요약

## 테스트 환경
- 이미지: 10개 (400x300)
- 모드: Fast
- 반복: 각 설정당 3회

## 최종 결과 (3차 루프 완료)

### 순차 평가 (workers=0)
- 데이터 준비: 평균 0.71s
- 첫 평가: 평균 1.40s
- Batch10: 평균 12.63s
- 총 시간: 평균 14.75s

### 병렬 평가 (workers=4)
- 데이터 준비: 평균 0.45s
- 첫 평가: 평균 2.67s (프로세스 시작 오버헤드)
- Batch10: 평균 6.64s
- 총 시간: 평균 9.76s
- **Batch10 속도 향상: 1.90x**
- **전체 시간 단축: 34% (14.75s → 9.76s)**

## 주요 개선 사항 (3차 루프)

### 1차 루프: ProcessPool 수정
- **문제**: lambda 함수로 인한 pickle 오류
- **해결**: 모듈 레벨 `_eval_candidate_wrapper_mp` 함수 추가
- **결과**: ProcessPool 정상 작동, Batch10 2.19x 속도 향상

### 2차 루프: 첫 평가 최적화
- **전략**: 첫 평가는 순차로 빠르게 시작, 이후 병렬화
- **구현**: `use_parallel = candidate_workers >= 1 and (round_num > 1 or processed > 0)`
- **결과**: 첫 평가 시간 유지, Batch10 1.93x 속도 향상

### 3차 루프: 데이터셋 최적화
- **전략**: 첫 평가는 coarse 데이터 사용, 이후 full 데이터
- **구현**: `eval_data = data_coarse if (round_num == 1 and processed == 0) else data_full`
- **결과**: 첫 평가 시간 약간 개선, 전체 성능 안정화

## 성능 개선 요약
1. **병렬화**: Batch10 평가 시간 **1.90배 단축** (12.63s → 6.64s)
2. **전체 시간**: **34% 단축** (14.75s → 9.76s)
3. **데이터 준비**: 병렬화로 **36% 단축** (0.71s → 0.45s)
4. **안정성**: ProcessPool 정상 작동, 오류 없음

## 최종 권장 사항
- **auto_candidate_workers=4** 권장 (Intel i5 기준)
- 첫 평가는 순차로 빠르게 시작하여 즉시 피드백 제공
- 이후 병렬화로 전체 속도 향상
- 데이터 준비도 병렬화되어 초기 지연 시간 단축
